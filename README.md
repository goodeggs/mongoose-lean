# mongoose-lean

Default [Mongoose](http://mongoosejs.com/) to use lean queries.  Fatten them back up with syntactic sugar.

[![NPM version](http://img.shields.io/npm/v/mongoose-lean.svg?style=flat-square)](https://www.npmjs.org/package/mongoose-lean)
[![Build Status](http://img.shields.io/travis/goodeggs/mongoose-lean.svg?style=flat-square)](https://travis-ci.org/goodeggs/mongoose-lean)
[![MIT License](http://img.shields.io/badge/license-MIT-blue.svg?style=flat-square)](https://github.com/goodeggs/mongoose-lean/blob/master/LICENSE.md)

## Usage

First a word of warning: the current implementation patches mongoose directly, which means if any of your code *or dependencies* expects the default un-patched mongoose, you'll be in trouble.  I'm interested in changing the implementation to opt-in to this behavior on a per-model basis, which should avoid this.

```
npm install mongoose-lean
```

```javascript
var mongoose = require('mongoose');
var patchMongoose = require('mongoose-lean');
patchMongoose(mongoose);

var User = mongoose.model('User', new mongoose.Schema({name: String}));

function weighIn(bob) {
  console.log('bob is ', bob instanceof User ? 'fat' : 'lean');
}

User.create({name: 'Bob'}, function(err, bob) {
  weighIn(bob); // => bob is fat
  User.findById(bob._id, function(err, bob) {
    weighIn(bob); // => bob is lean
    User.findById(bob._id).fat().exec(function(err, bob) {
      weighIn(bob); // => bob is fat
    });
  });
});
```

## Contributing

Please follow our [Code of Conduct](https://github.com/goodeggs/mongoose-lean/blob/master/CODE_OF_CONDUCT.md)
when contributing to this project.

```
$ git clone https://github.com/goodeggs/mongoose-lean && cd mongoose-lean
$ npm install
$ npm test
```

_Module scaffold generated by [generator-goodeggs-npm](https://github.com/goodeggs/generator-goodeggs-npm)._
